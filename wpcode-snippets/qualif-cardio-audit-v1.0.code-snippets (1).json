{"generator":"Code Snippets v3.9.2","date_created":"2025-11-23 19:02","snippets":[{"id":7,"name":"Qualif Cardio Audit v1.0","code":"\/**\n * \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n * QUALIF CARDIO - AUDIT v2.0 AVEC ZOOM INTELLIGENT\n * \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n * \n * \ud83d\udccb Shortcode : [qualif_audit]\n * \ud83d\udd0d Page de recherche\/audit des qualifications\n * \ud83d\udd10 Prot\u00e9g\u00e9e par mot de passe WordPress (natif)\n * \ud83d\udd0d Zoom intelligent avec localStorage\n * \n * FONCTION :\n * - Recherche par date et\/ou heure\n * - Affiche TOUTES les infos de la qualification\n * - Bouton copier notes Doctolib\n * - Pour audit\/r\u00e9\u00e9coute appels Callibri\n * - Zoom adaptatif + sauvegarde pr\u00e9f\u00e9rence\n * \n * \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n *\/\n\n\/\/ Shortcode [qualif_audit]\nif (!function_exists('qc_audit_shortcode')) {\n    function qc_audit_shortcode() {\n        \/\/ Protection par mot de passe WordPress (g\u00e9r\u00e9 par WP lui-m\u00eame)\n        \n        global $wpdb;\n        $table = $wpdb->prefix . 'qualif_cardio_complete';\n        $config = qc_get_config();\n        \n        \/\/ Recherche\n        $results = array();\n        $search_date = '';\n        $search_time = '';\n        \n        if (isset($_POST['qc_audit_search'])) {\n            $search_date = sanitize_text_field($_POST['search_date']);\n            $search_time = sanitize_text_field($_POST['search_time']);\n            \n            if ($search_time) {\n                \/\/ Recherche pr\u00e9cise avec heure\n                $datetime_start = $search_date . ' ' . $search_time . ':00';\n                $datetime_end = $search_date . ' ' . $search_time . ':59';\n                $results = $wpdb->get_results($wpdb->prepare(\n                    \"SELECT * FROM $table WHERE created_at BETWEEN %s AND %s ORDER BY created_at DESC\",\n                    $datetime_start,\n                    $datetime_end\n                ));\n            } else {\n                \/\/ Recherche par date uniquement\n                $date_start = $search_date . ' 00:00:00';\n                $date_end = $search_date . ' 23:59:59';\n                $results = $wpdb->get_results($wpdb->prepare(\n                    \"SELECT * FROM $table WHERE created_at BETWEEN %s AND %s ORDER BY created_at DESC\",\n                    $date_start,\n                    $date_end\n                ));\n            }\n        }\n        \n        ob_start();\n        ?>\n        <style>\n            .qc-audit-wrapper {\n                max-width: 1200px;\n                margin: 0 auto;\n                padding: 20px;\n                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n                transition: zoom 0.2s ease;\n                position: relative;\n            }\n            \n            \/* ============================================ *\/\n            \/* CONTR\u00d4LES ZOOM *\/\n            \/* ============================================ *\/\n            .qc-audit-zoom-controls {\n                position: absolute;\n                top: 20px;\n                right: 20px;\n                z-index: 1000;\n                background: white;\n                border-radius: 12px;\n                box-shadow: 0 4px 20px rgba(0,0,0,0.2);\n                padding: 10px;\n                display: flex;\n                flex-direction: column;\n                gap: 8px;\n                border: 3px solid <?php echo $config['couleur_primaire']; ?>;\n            }\n            \n            .qc-audit-zoom-btn {\n                width: 45px;\n                height: 45px;\n                border: none;\n                background: linear-gradient(135deg, <?php echo $config['couleur_primaire']; ?> 0%, <?php echo $config['couleur_secondaire']; ?> 100%);\n                color: white;\n                font-size: 24px;\n                font-weight: 900;\n                border-radius: 8px;\n                cursor: pointer;\n                transition: all 0.2s;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            }\n            \n            .qc-audit-zoom-btn:hover {\n                transform: scale(1.1);\n                box-shadow: 0 4px 12px rgba(5, 150, 222, 0.5);\n            }\n            \n            .qc-audit-zoom-btn:active {\n                transform: scale(0.95);\n            }\n            \n            .qc-audit-zoom-value {\n                text-align: center;\n                font-size: 13px;\n                font-weight: 800;\n                color: <?php echo $config['couleur_primaire']; ?>;\n                padding: 4px 0;\n                cursor: pointer;\n                transition: all 0.2s;\n            }\n            \n            .qc-audit-zoom-value:hover {\n                color: <?php echo $config['couleur_secondaire']; ?>;\n                text-decoration: underline;\n            }\n            \/* ============================================ *\/\n            \n            .qc-audit-header {\n                background: linear-gradient(135deg, <?php echo $config['couleur_primaire']; ?>, <?php echo $config['couleur_secondaire']; ?>);\n                padding: 30px;\n                border-radius: 12px;\n                margin-bottom: 30px;\n                box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n            }\n            .qc-audit-title {\n                margin: 0;\n                font-size: 28px;\n                color: white;\n                font-weight: 700;\n            }\n            .qc-audit-subtitle {\n                margin: 8px 0 0 0;\n                font-size: 14px;\n                color: rgba(255,255,255,0.9);\n            }\n            .qc-audit-search-form {\n                background: white;\n                padding: 25px;\n                border-radius: 12px;\n                box-shadow: 0 2px 8px rgba(0,0,0,0.08);\n                margin-bottom: 30px;\n            }\n            .qc-audit-search-grid {\n                display: grid;\n                grid-template-columns: 1fr 1fr 200px;\n                gap: 15px;\n                align-items: end;\n            }\n            .qc-audit-field {\n                display: flex;\n                flex-direction: column;\n            }\n            .qc-audit-label {\n                font-size: 13px;\n                font-weight: 600;\n                color: #64748b;\n                margin-bottom: 6px;\n                text-transform: uppercase;\n                letter-spacing: 0.5px;\n            }\n            .qc-audit-input {\n                padding: 12px;\n                border: 2px solid #e2e8f0;\n                border-radius: 8px;\n                font-size: 15px;\n                transition: all 0.2s;\n            }\n            .qc-audit-input:focus {\n                outline: none;\n                border-color: <?php echo $config['couleur_primaire']; ?>;\n            }\n            .qc-audit-btn {\n                padding: 12px 24px;\n                background: <?php echo $config['couleur_primaire']; ?>;\n                color: white;\n                border: none;\n                border-radius: 8px;\n                font-size: 15px;\n                font-weight: 700;\n                cursor: pointer;\n                transition: all 0.3s;\n            }\n            .qc-audit-btn:hover {\n                background: <?php echo $config['couleur_secondaire']; ?>;\n                transform: translateY(-2px);\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n            }\n            .qc-audit-results {\n                display: flex;\n                flex-direction: column;\n                gap: 25px;\n            }\n            .qc-audit-card {\n                background: white;\n                border-radius: 12px;\n                box-shadow: 0 2px 8px rgba(0,0,0,0.08);\n                overflow: hidden;\n            }\n            .qc-audit-card-header {\n                background: <?php echo $config['couleur_primaire']; ?>;\n                color: white;\n                padding: 18px 25px;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n            }\n            .qc-audit-card-time {\n                font-size: 18px;\n                font-weight: 700;\n            }\n            .qc-audit-card-id {\n                font-size: 13px;\n                opacity: 0.9;\n            }\n            .qc-audit-card-body {\n                padding: 25px;\n            }\n            .qc-audit-section {\n                margin-bottom: 25px;\n            }\n            .qc-audit-section:last-child {\n                margin-bottom: 0;\n            }\n            .qc-audit-section-title {\n                font-size: 16px;\n                font-weight: 700;\n                color: #1e293b;\n                margin-bottom: 15px;\n                padding-bottom: 8px;\n                border-bottom: 2px solid #e2e8f0;\n            }\n            .qc-audit-grid {\n                display: grid;\n                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n                gap: 15px;\n            }\n            .qc-audit-item {\n                display: flex;\n                flex-direction: column;\n                gap: 4px;\n            }\n            .qc-audit-item-label {\n                font-size: 12px;\n                color: #64748b;\n                font-weight: 600;\n                text-transform: uppercase;\n                letter-spacing: 0.5px;\n            }\n            .qc-audit-item-value {\n                font-size: 15px;\n                color: #1e293b;\n                font-weight: 600;\n            }\n            .qc-audit-rdv-type {\n                display: inline-block;\n                padding: 8px 16px;\n                background: #fef3c7;\n                border: 2px solid #fbbf24;\n                border-radius: 6px;\n                font-size: 14px;\n                font-weight: 700;\n                color: #92400e;\n                text-transform: uppercase;\n            }\n            .qc-audit-questions {\n                display: flex;\n                flex-direction: column;\n                gap: 10px;\n            }\n            .qc-audit-q {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 10px 15px;\n                background: #f8fafc;\n                border-radius: 6px;\n            }\n            .qc-audit-q-label {\n                font-size: 14px;\n                color: #475569;\n                font-weight: 600;\n            }\n            .qc-audit-q-value {\n                padding: 4px 12px;\n                border-radius: 4px;\n                font-size: 13px;\n                font-weight: 700;\n            }\n            .qc-audit-q-value.yes {\n                background: #dcfce7;\n                color: #166534;\n            }\n            .qc-audit-q-value.no {\n                background: #fee2e2;\n                color: #991b1b;\n            }\n            .qc-audit-notes-section {\n                margin-top: 20px;\n                padding-top: 20px;\n                border-top: 2px solid #e2e8f0;\n            }\n            .qc-audit-notes-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                margin-bottom: 15px;\n            }\n            .qc-audit-notes-title {\n                font-size: 16px;\n                font-weight: 700;\n                color: <?php echo $config['couleur_primaire']; ?>;\n                text-transform: uppercase;\n            }\n            .qc-audit-copy-btn {\n                padding: 10px 20px;\n                background: <?php echo $config['couleur_primaire']; ?>;\n                color: white;\n                border: none;\n                border-radius: 8px;\n                font-size: 14px;\n                font-weight: 700;\n                cursor: pointer;\n                transition: all 0.3s;\n            }\n            .qc-audit-copy-btn:hover {\n                background: <?php echo $config['couleur_secondaire']; ?>;\n                transform: translateY(-2px);\n            }\n            .qc-audit-notes {\n                background: #f8fafc;\n                border: 2px solid #cbd5e1;\n                border-radius: 8px;\n                padding: 18px;\n                white-space: pre-wrap;\n                font-family: 'Courier New', monospace;\n                font-size: 14px;\n                line-height: 1.7;\n                color: #1e293b;\n                font-weight: 600;\n            }\n            .qc-audit-no-results {\n                text-align: center;\n                padding: 40px;\n                background: #f8fafc;\n                border-radius: 12px;\n                color: #64748b;\n                font-size: 16px;\n            }\n            @media (max-width: 768px) {\n                .qc-audit-search-grid {\n                    grid-template-columns: 1fr;\n                }\n                .qc-audit-grid {\n                    grid-template-columns: 1fr;\n                }\n            }\n        <\/style>\n\n        <div class=\"qc-audit-wrapper\" id=\"qc-audit-wrapper\">\n            <!-- ============================================ -->\n            <!-- CONTR\u00d4LES ZOOM -->\n            <!-- ============================================ -->\n            <div class=\"qc-audit-zoom-controls\">\n                <button type=\"button\" class=\"qc-audit-zoom-btn\" id=\"qc-audit-zoom-plus\" title=\"Zoomer (Ctrl +)\">+<\/button>\n                <div class=\"qc-audit-zoom-value\" id=\"qc-audit-zoom-display\" title=\"Double-clic pour r\u00e9initialiser\">90%<\/div>\n                <button type=\"button\" class=\"qc-audit-zoom-btn\" id=\"qc-audit-zoom-minus\" title=\"D\u00e9zoomer (Ctrl -)\">\u2212<\/button>\n            <\/div>\n            \n            <div class=\"qc-audit-header\">\n                <h1 class=\"qc-audit-title\">\ud83d\udd0d Audit Qualifications<\/h1>\n                <p class=\"qc-audit-subtitle\">Recherche et consultation des qualifications enregistr\u00e9es<\/p>\n            <\/div>\n            \n            <div class=\"qc-audit-search-form\">\n                <form method=\"POST\">\n                    <div class=\"qc-audit-search-grid\">\n                        <div class=\"qc-audit-field\">\n                            <label class=\"qc-audit-label\">\ud83d\udcc5 Date<\/label>\n                            <input type=\"date\" name=\"search_date\" class=\"qc-audit-input\" \n                                   value=\"<?php echo $search_date ? $search_date : date('Y-m-d'); ?>\" required>\n                        <\/div>\n                        <div class=\"qc-audit-field\">\n                            <label class=\"qc-audit-label\">\ud83d\udd50 Heure (optionnel)<\/label>\n                            <input type=\"time\" name=\"search_time\" class=\"qc-audit-input\" \n                                   value=\"<?php echo $search_time; ?>\" placeholder=\"Ex: 15:21\">\n                        <\/div>\n                        <div class=\"qc-audit-field\">\n                            <label class=\"qc-audit-label\">&nbsp;<\/label>\n                            <button type=\"submit\" name=\"qc_audit_search\" class=\"qc-audit-btn\">\n                                \ud83d\udd0d Rechercher\n                            <\/button>\n                        <\/div>\n                    <\/div>\n                <\/form>\n            <\/div>\n            \n            <?php if (isset($_POST['qc_audit_search'])): ?>\n                <?php if (empty($results)): ?>\n                    <div class=\"qc-audit-no-results\">\n                        Aucune qualification trouv\u00e9e pour cette date\/heure.\n                    <\/div>\n                <?php else: ?>\n                    <div class=\"qc-audit-results\">\n                        <?php foreach ($results as $r): ?>\n                            <div class=\"qc-audit-card\">\n                                <div class=\"qc-audit-card-header\">\n                                    <div class=\"qc-audit-card-time\">\n                                        \u23f0 <?php echo date('H:i:s', strtotime($r->created_at)); ?>\n                                    <\/div>\n                                    <div class=\"qc-audit-card-id\">\n                                        ID #<?php echo $r->id; ?>\n                                    <\/div>\n                                <\/div>\n                                \n                                <div class=\"qc-audit-card-body\">\n                                    <div class=\"qc-audit-section\">\n                                        <div class=\"qc-audit-section-title\">\ud83d\udc64 Patient<\/div>\n                                        <div class=\"qc-audit-grid\">\n                                            <div class=\"qc-audit-item\">\n                                                <span class=\"qc-audit-item-label\">\u00c2ge<\/span>\n                                                <span class=\"qc-audit-item-value\"><?php echo $r->age; ?> ans<\/span>\n                                            <\/div>\n                                            <div class=\"qc-audit-item\">\n                                                <span class=\"qc-audit-item-label\">Sexe<\/span>\n                                                <span class=\"qc-audit-item-value\"><?php echo $r->sexe; ?><\/span>\n                                            <\/div>\n                                            <div class=\"qc-audit-item\">\n                                                <span class=\"qc-audit-item-label\">Taille<\/span>\n                                                <span class=\"qc-audit-item-value\"><?php echo $r->taille; ?> cm<\/span>\n                                            <\/div>\n                                            <div class=\"qc-audit-item\">\n                                                <span class=\"qc-audit-item-label\">Poids<\/span>\n                                                <span class=\"qc-audit-item-value\"><?php echo $r->poids; ?> kg<\/span>\n                                            <\/div>\n                                            <div class=\"qc-audit-item\">\n                                                <span class=\"qc-audit-item-label\">IMC<\/span>\n                                                <span class=\"qc-audit-item-value\"><?php echo number_format($r->imc, 1); ?><\/span>\n                                            <\/div>\n                                            <div class=\"qc-audit-item\">\n                                                <span class=\"qc-audit-item-label\">M\u00e9decin adresseur<\/span>\n                                                <span class=\"qc-audit-item-value\"><?php echo $r->medecin_adresseur; ?><\/span>\n                                            <\/div>\n                                            <div class=\"qc-audit-item\">\n                                                <span class=\"qc-audit-item-label\">Commune<\/span>\n                                                <span class=\"qc-audit-item-value\"><?php echo $r->commune; ?><\/span>\n                                            <\/div>\n                                            <div class=\"qc-audit-item\">\n                                                <span class=\"qc-audit-item-label\">Suivi cardio<\/span>\n                                                <span class=\"qc-audit-item-value\"><?php echo $r->suivi_cardio; ?><\/span>\n                                            <\/div>\n                                            <?php if ($r->nom_cardiologue): ?>\n                                                <div class=\"qc-audit-item\">\n                                                    <span class=\"qc-audit-item-label\">Cardiologue<\/span>\n                                                    <span class=\"qc-audit-item-value\"><?php echo $r->nom_cardiologue; ?><\/span>\n                                                <\/div>\n                                            <?php endif; ?>\n                                        <\/div>\n                                    <\/div>\n                                    \n                                    <div class=\"qc-audit-section\">\n                                        <div class=\"qc-audit-section-title\">\ud83d\udccb Type de RDV<\/div>\n                                        <div class=\"qc-audit-rdv-type\">\n                                            <?php echo $r->type_rdv; ?>\n                                        <\/div>\n                                    <\/div>\n                                    \n                                    <div class=\"qc-audit-section\">\n                                        <div class=\"qc-audit-section-title\">\ud83e\ude7a Questions<\/div>\n                                        <div class=\"qc-audit-questions\">\n                                            <div class=\"qc-audit-q\">\n                                                <span class=\"qc-audit-q-label\">Q1. Ant\u00e9c\u00e9dents CV<\/span>\n                                                <span class=\"qc-audit-q-value <?php echo $r->q1_atcd == 'OUI' ? 'yes' : 'no'; ?>\">\n                                                    <?php echo $r->q1_atcd; ?>\n                                                    <?php if ($r->q1_atcd_details): ?>\n                                                        <span style=\"font-size:12px;\"> (<?php echo $r->q1_atcd_details; ?>)<\/span>\n                                                    <?php endif; ?>\n                                                <\/span>\n                                            <\/div>\n                                            \n                                            <div class=\"qc-audit-q\">\n                                                <span class=\"qc-audit-q-label\">Q2. Douleur thoracique<\/span>\n                                                <span class=\"qc-audit-q-value <?php echo $r->q2_douleur_thoracique != 'NON' ? 'yes' : 'no'; ?>\">\n                                                    <?php echo $r->q2_douleur_thoracique; ?>\n                                                <\/span>\n                                            <\/div>\n                                            \n                                            <div class=\"qc-audit-q\">\n                                                <span class=\"qc-audit-q-label\">Q3. Essoufflement<\/span>\n                                                <span class=\"qc-audit-q-value <?php echo $r->q3_essoufflement == 'OUI' ? 'yes' : 'no'; ?>\">\n                                                    <?php echo $r->q3_essoufflement; ?>\n                                                <\/span>\n                                            <\/div>\n                                            \n                                            <div class=\"qc-audit-q\">\n                                                <span class=\"qc-audit-q-label\">Q4. Claudication<\/span>\n                                                <span class=\"qc-audit-q-value <?php echo $r->q4_claudication == 'OUI' ? 'yes' : 'no'; ?>\">\n                                                    <?php echo $r->q4_claudication; ?>\n                                                <\/span>\n                                            <\/div>\n                                            \n                                            <div class=\"qc-audit-q\">\n                                                <span class=\"qc-audit-q-label\">Q5. Diab\u00e8te<\/span>\n                                                <span class=\"qc-audit-q-value <?php echo $r->q5_diabete == 'OUI' ? 'yes' : 'no'; ?>\">\n                                                    <?php echo $r->q5_diabete; ?>\n                                                <\/span>\n                                            <\/div>\n                                            \n                                            <div class=\"qc-audit-q\">\n                                                <span class=\"qc-audit-q-label\">Q6. HTA<\/span>\n                                                <span class=\"qc-audit-q-value <?php echo $r->q6_hta == 'OUI' ? 'yes' : 'no'; ?>\">\n                                                    <?php echo $r->q6_hta; ?>\n                                                <\/span>\n                                            <\/div>\n                                            \n                                            <div class=\"qc-audit-q\">\n                                                <span class=\"qc-audit-q-label\">Q7. Tabac<\/span>\n                                                <span class=\"qc-audit-q-value <?php echo $r->q7_tabac == 'OUI' ? 'yes' : 'no'; ?>\">\n                                                    <?php echo $r->q7_tabac; ?>\n                                                    <?php if ($r->q7_tabac_pa): ?>\n                                                        <span style=\"font-size:12px;\"> (<?php echo $r->q7_tabac_pa; ?> PA)<\/span>\n                                                    <?php endif; ?>\n                                                <\/span>\n                                            <\/div>\n                                            \n                                            <div class=\"qc-audit-q\">\n                                                <span class=\"qc-audit-q-label\">Q8. Cholest\u00e9rol<\/span>\n                                                <span class=\"qc-audit-q-value <?php echo $r->q8_cholesterol == 'OUI' ? 'yes' : 'no'; ?>\">\n                                                    <?php echo $r->q8_cholesterol; ?>\n                                                <\/span>\n                                            <\/div>\n                                            \n                                            <div class=\"qc-audit-q\" style=\"border-top: 2px solid #cbd5e1; margin-top: 10px; padding-top: 10px;\">\n                                                <span class=\"qc-audit-q-label\">Nombre de facteurs de risque<\/span>\n                                                <span class=\"qc-audit-q-value yes\"><?php echo $r->nb_facteurs_risque; ?><\/span>\n                                            <\/div>\n                                        <\/div>\n                                    <\/div>\n                                    \n                                    <div class=\"qc-audit-notes-section\">\n                                        <div class=\"qc-audit-notes-header\">\n                                            <h3 class=\"qc-audit-notes-title\">\ud83d\udccb Notes Doctolib<\/h3>\n                                            <button type=\"button\" class=\"qc-audit-copy-btn\" onclick=\"copyNotes<?php echo $r->id; ?>()\">\n                                                \ud83d\udccb Copier\n                                            <\/button>\n                                        <\/div>\n                                        <pre id=\"notes-<?php echo $r->id; ?>\" class=\"qc-audit-notes\"><?php echo esc_html($r->notes_doctolib); ?><\/pre>\n                                        <script>\n                                        function copyNotes<?php echo $r->id; ?>() {\n                                            const text = document.getElementById('notes-<?php echo $r->id; ?>').textContent;\n                                            if (navigator.clipboard) {\n                                                navigator.clipboard.writeText(text).then(function() {\n                                                    alert('\u2705 Notes copi\u00e9es !');\n                                                });\n                                            } else {\n                                                alert('Veuillez copier manuellement (Ctrl+C)');\n                                            }\n                                        }\n                                        <\/script>\n                                    <\/div>\n                                    \n                                    <?php if ($r->email_sent): ?>\n                                        <div style=\"margin-top: 15px; padding: 10px; background: #d1fae5; border-radius: 6px; font-size: 12px; color: #065f46;\">\n                                            \u2705 Email envoy\u00e9 le <?php echo date('d\/m\/Y \u00e0 H:i', strtotime($r->email_sent_at)); ?>\n                                        <\/div>\n                                    <?php endif; ?>\n                                <\/div>\n                            <\/div>\n                        <?php endforeach; ?>\n                    <\/div>\n                <?php endif; ?>\n            <?php endif; ?>\n        <\/div>\n        \n        <script>\n        (function() {\n            'use strict';\n            \n            \/\/ ============================================\n            \/\/ GESTION DU ZOOM INTELLIGENT + LOCALSTORAGE\n            \/\/ ============================================\n            const STORAGE_KEY = 'qualif_audit_zoom';\n            const minZoom = 0.5;\n            const maxZoom = 1.5;\n            const zoomStep = 0.1;\n            \n            let currentZoom;\n            let defaultZoom;\n            \n            \/\/ D\u00e9tection auto r\u00e9solution\n            function getDefaultZoom() {\n                const screenWidth = window.screen.width;\n                return screenWidth < 1400 ? 0.9 : 1.0;\n            }\n            \n            \/\/ Charger le zoom\n            function loadZoom() {\n                const saved = localStorage.getItem(STORAGE_KEY);\n                if (saved) {\n                    currentZoom = parseFloat(saved);\n                    console.log('\ud83d\udcca Audit Zoom charg\u00e9:', currentZoom);\n                } else {\n                    defaultZoom = getDefaultZoom();\n                    currentZoom = defaultZoom;\n                    console.log('\ud83d\udcca Audit Zoom d\u00e9faut:', currentZoom);\n                }\n                updateZoom(currentZoom, false);\n            }\n            \n            \/\/ Sauvegarder\n            function saveZoom(zoom) {\n                localStorage.setItem(STORAGE_KEY, zoom);\n                console.log('\ud83d\udcbe Audit Zoom sauvegard\u00e9:', zoom);\n            }\n            \n            \/\/ Appliquer\n            function updateZoom(newZoom, save = true) {\n                if (newZoom < minZoom) newZoom = minZoom;\n                if (newZoom > maxZoom) newZoom = maxZoom;\n                currentZoom = newZoom;\n                document.getElementById('qc-audit-wrapper').style.zoom = currentZoom;\n                document.getElementById('qc-audit-zoom-display').textContent = Math.round(currentZoom * 100) + '%';\n                if (save) {\n                    saveZoom(currentZoom);\n                }\n            }\n            \n            \/\/ Reset\n            function resetZoom() {\n                const newDefault = getDefaultZoom();\n                updateZoom(newDefault);\n                console.log('\ud83d\udd04 Audit Zoom reset:', newDefault);\n            }\n            \n            \/\/ Bouton +\n            document.getElementById('qc-audit-zoom-plus').addEventListener('click', function() {\n                updateZoom(currentZoom + zoomStep);\n            });\n            \n            \/\/ Bouton -\n            document.getElementById('qc-audit-zoom-minus').addEventListener('click', function() {\n                updateZoom(currentZoom - zoomStep);\n            });\n            \n            \/\/ Double-clic = Reset\n            document.getElementById('qc-audit-zoom-display').addEventListener('dblclick', function() {\n                resetZoom();\n            });\n            \n            \/\/ Raccourcis clavier\n            document.addEventListener('keydown', function(e) {\n                if (e.ctrlKey || e.metaKey) {\n                    if (e.key === '+' || e.key === '=') {\n                        e.preventDefault();\n                        updateZoom(currentZoom + zoomStep);\n                    } else if (e.key === '-' || e.key === '_') {\n                        e.preventDefault();\n                        updateZoom(currentZoom - zoomStep);\n                    }\n                }\n            });\n            \n            \/\/ Charger au d\u00e9marrage\n            loadZoom();\n        })();\n        <\/script>\n        <?php\n        return ob_get_clean();\n    }\n}\n\nadd_shortcode('qualif_audit', 'qc_audit_shortcode');","tags":["qualif-cardio","audit"],"active":true,"modified":"2025-10-13 20:28:08","revision":"1"}]}